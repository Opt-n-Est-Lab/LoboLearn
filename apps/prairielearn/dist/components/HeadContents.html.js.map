{"version":3,"file":"HeadContents.html.js","sourceRoot":"","sources":["../../src/components/HeadContents.html.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,oBAAoB,CAAC;AAE1C,OAAO,EAAE,SAAS,EAAE,iBAAiB,EAAE,oBAAoB,EAAE,MAAM,kBAAkB,CAAC;AACtF,OAAO,EAAE,MAAM,EAAE,MAAM,kBAAkB,CAAC;AAC1C,OAAO,EAKN,MAAM,oBAAoB,CAAC;AAiB5B,MAAM,UAAU,YAAY,CAAC,YAA0B;IACrD,OAAO,IAAI,CAAA;;;;MAIP,MAAM,CAAC,YAAY;QACnB,CAAC,CAAC,IAAI,CAAA,uCAAuC,MAAM,CAAC,YAAY,MAAM;QACtE,CAAC,CAAC,EAAE;aACG,QAAQ,CAAC,YAAY,CAAC;kBACjB,oBAAoB,CAAC,sCAAsC,CAAC;;cAEhE,oBAAoB,CAAC,0CAA0C,CAAC;;;kBAG5D,SAAS,CAAC,wBAAwB,CAAC;kBACnC,SAAS,CAAC,uBAAuB,CAAC;mBACjC,oBAAoB,CAAC,2BAA2B,CAAC;mBACjD,oBAAoB,CAAC,2CAA2C,CAAC;mBACjE,oBAAoB,CAAC,6CAA6C,CAAC;MAChF,iBAAiB,CAAC,gBAAgB,CAAC,IAAI,iBAAiB,CAAC,iBAAiB,CAAC;GAC9E,CAAC;AACJ,CAAC;AAED,sCAAsC;AACtC,SAAS,mBAAmB,CAAC,IAAY;IACvC,OAAO,IAAI;SACR,WAAW,EAAE;SACb,KAAK,CAAC,GAAG,CAAC;SACV,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;SAC/D,IAAI,CAAC,GAAG,CAAC,CAAC;AACf,CAAC;AAED;;;;;;;;GAQG;AACH,SAAS,QAAQ,CAAC,EAAE,SAAS,EAAE,SAAS,EAAE,QAAQ,EAAgB;IAChE,IAAI,MAAM,CAAC,aAAa,EAAE,CAAC;QACzB,OAAO,MAAM,CAAC,aAAa,CAAC;IAC9B,CAAC;IACD,MAAM,EACJ,UAAU,EACV,cAAc,EACd,sBAAsB,EACtB,MAAM,EACN,eAAe,EACf,OAAO,EACP,UAAU,EACV,UAAU,GACX,GAAG,SAAS,CAAC;IAEd,MAAM,QAAQ,GAAa,EAAE,CAAC;IAE9B,mCAAmC;IACnC,6DAA6D;IAC7D,IAAI,cAAc,GAAG,EAAE,CAAC;IACxB,IAAI,SAAS,IAAI,IAAI,EAAE,CAAC;QACtB,cAAc,GAAG,SAAS,CAAC;IAC7B,CAAC;SAAM,IAAI,UAAU,IAAI,IAAI,EAAE,CAAC;QAC9B,cAAc,GAAG,mBAAmB,CAAC,UAAU,CAAC,CAAC;IACnD,CAAC;IACD,IAAI,cAAc;QAAE,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;IAElD,gDAAgD;IAChD,iCAAiC;IACjC,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,IAAI,QAAQ,IAAI,IAAI,EAAE,CAAC;QAC5C,QAAQ,CAAC,CAAC,CAAC,IAAI,KAAK,QAAQ,GAAG,CAAC;IAClC,CAAC;IAED,IAAI,UAAU,IAAI,IAAI,IAAI,cAAc,IAAI,IAAI,EAAE,CAAC;QACjD,MAAM,uBAAuB,GAAG,GAAG,cAAc,CAAC,YAAY,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC;QACrF,8CAA8C;QAC9C,sEAAsE;QACtE,sBAAsB;QACtB,IAAI,sBAAsB,IAAI,IAAI,EAAE,CAAC;YACnC,IAAI,UAAU,CAAC,IAAI,KAAK,UAAU,EAAE,CAAC;gBACnC,QAAQ,CAAC,IAAI,CAAC,sBAAsB,CAAC,eAAe,CAAC,CAAC;YACxD,CAAC;iBAAM,IAAI,UAAU,CAAC,IAAI,KAAK,MAAM,EAAE,CAAC;gBACtC,QAAQ,CAAC,IAAI,CAAC,GAAG,uBAAuB,IAAI,sBAAsB,CAAC,eAAe,EAAE,CAAC,CAAC;YACxF,CAAC;QACH,CAAC;aAAM,CAAC;YACN,QAAQ,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;QACzC,CAAC;IACH,CAAC;IAED,kDAAkD;IAClD,6CAA6C;IAC7C,IAAI,MAAM,IAAI,IAAI,EAAE,CAAC;QACnB,IAAI,UAAU,GAAG,MAAM,CAAC,UAAU,IAAI,EAAE,CAAC;QACzC,kDAAkD;QAClD,wCAAwC;QACxC,IAAI,UAAU,KAAK,YAAY,IAAI,eAAe,IAAI,IAAI,EAAE,CAAC;YAC3D,UAAU,IAAI,IAAI,GAAG,eAAe,CAAC,UAAU,CAAC;QAClD,CAAC;QACD,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IAC5B,CAAC;SAAM,IAAI,OAAO,IAAI,IAAI,IAAI,OAAO,KAAK,OAAO,IAAI,CAAC,cAAc,EAAE,CAAC;QACrE,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC,CAAC;IAC9C,CAAC;IACD,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC;AACpH,CAAC","sourcesContent":["import { html } from '@prairielearn/html';\n\nimport { assetPath, compiledScriptTag, nodeModulesAssetPath } from '../lib/assets.js';\nimport { config } from '../lib/config.js';\nimport {\n  type Assessment,\n  type AssessmentSet,\n  type Course,\n  type CourseInstance,\n} from '../lib/db-types.js';\n\ninterface TitleOptions {\n  resLocals: {\n    assessment?: Assessment;\n    assessment_set?: AssessmentSet;\n    instance_question_info?: { question_number: string };\n    course?: Course;\n    course_instance?: CourseInstance;\n    navPage?: string;\n    navSubPage?: string;\n    navbarType?: string;\n  };\n  pageTitle?: string;\n  pageNote?: string;\n}\n\nexport function HeadContents(titleOptions: TitleOptions) {\n  return html`\n    <meta charset=\"utf-8\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n    ${config.cookieDomain\n      ? html`<meta name=\"cookie-domain\" content=\"${config.cookieDomain}\" />`\n      : ''}\n    <title>${getTitle(titleOptions)}</title>\n    <link href=\"${nodeModulesAssetPath('bootstrap/dist/css/bootstrap.min.css')}\" rel=\"stylesheet\" />\n    <link\n      href=\"${nodeModulesAssetPath('bootstrap-icons/font/bootstrap-icons.css')}\"\n      rel=\"stylesheet\"\n    />\n    <link href=\"${assetPath('stylesheets/colors.css')}\" rel=\"stylesheet\" />\n    <link href=\"${assetPath('stylesheets/local.css')}\" rel=\"stylesheet\" />\n    <script src=\"${nodeModulesAssetPath('jquery/dist/jquery.min.js')}\"></script>\n    <script src=\"${nodeModulesAssetPath('bootstrap/dist/js/bootstrap.bundle.min.js')}\"></script>\n    <script src=\"${nodeModulesAssetPath('@fortawesome/fontawesome-free/js/all.min.js')}\"></script>\n    ${compiledScriptTag('application.ts')} ${compiledScriptTag('navbarClient.ts')}\n  `;\n}\n\n// e.g. \"hello_world\" => \"Hello World\"\nfunction displayFriendlyPage(page: string) {\n  return page\n    .toLowerCase()\n    .split('_')\n    .map((word) => word.charAt(0).toUpperCase() + word.substring(1))\n    .join(' ');\n}\n\n/**\n * The title of the page is composed of the following parts, in this order:\n * 1. The custom `pageTitle`, or a friendly version of `navSubPage` if the `pageTitle` is not provided.\n *    - If `pageNote` is provided, it is appended in parenthesis after the first part.\n * 2. The assessment (including instance question info) if available.\n * 3. The course (including course instance if the user is an instructor) if available.\n * 4. A friendly version of `navPage` if neither of the options above is available.\n * 5. The string \"PrairieLearn\" (fixed).\n */\nfunction getTitle({ resLocals, pageTitle, pageNote }: TitleOptions) {\n  if (config.titleOverride) {\n    return config.titleOverride;\n  }\n  const {\n    assessment,\n    assessment_set,\n    instance_question_info,\n    course,\n    course_instance,\n    navPage,\n    navSubPage,\n    navbarType,\n  } = resLocals;\n\n  const navTrace: string[] = [];\n\n  // If pageTitle is defined, use it,\n  // otherwise, generate lowest-level page name from navSubPage\n  let displayedTitle = '';\n  if (pageTitle != null) {\n    displayedTitle = pageTitle;\n  } else if (navSubPage != null) {\n    displayedTitle = displayFriendlyPage(navSubPage);\n  }\n  if (displayedTitle) navTrace.push(displayedTitle);\n\n  // If pageNote is defined, add it in parenthesis\n  // after the first navTrace entry\n  if (navTrace.length > 0 && pageNote != null) {\n    navTrace[0] += ` (${pageNote})`;\n  }\n\n  if (assessment != null && assessment_set != null) {\n    const assessment_abbreviation = `${assessment_set.abbreviation}${assessment.number}`;\n    // Possibilities need to be enumerated because\n    // instance_question_info.question_number is formatted differently for\n    // homework and exams.\n    if (instance_question_info != null) {\n      if (assessment.type === 'Homework') {\n        navTrace.push(instance_question_info.question_number);\n      } else if (assessment.type === 'Exam') {\n        navTrace.push(`${assessment_abbreviation}.${instance_question_info.question_number}`);\n      }\n    } else {\n      navTrace.push(assessment_abbreviation);\n    }\n  }\n\n  // If page is associated with a particular course,\n  // always display the short name, e.g. QA 101\n  if (course != null) {\n    let courseName = course.short_name ?? '';\n    // If an instructor is viewing, always display the\n    // short course instance name, e.g. fa19\n    if (navbarType === 'instructor' && course_instance != null) {\n      courseName += ', ' + course_instance.short_name;\n    }\n    navTrace.push(courseName);\n  } else if (navPage != null && navPage !== 'error' && !displayedTitle) {\n    navTrace.push(displayFriendlyPage(navPage));\n  }\n  return `${config.devMode ? '[DEV]' : ''} ${navTrace.length > 0 ? navTrace.join(' â€” ') + ' | ' : ''} PrairieLearn`;\n}\n"]}