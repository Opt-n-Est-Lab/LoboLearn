{"version":3,"file":"IssueBadge.html.js","sourceRoot":"","sources":["../../src/components/IssueBadge.html.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,oBAAoB,CAAC;AAE1C,MAAM,UAAU,UAAU,CAAC,EACzB,KAAK,EACL,YAAY,EACZ,QAAQ,EACR,QAAQ,EACR,SAAS,EACT,SAAS,GAiBV;IACC,qGAAqG;IACrG,IAAI,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC;QAAE,OAAO,EAAE,CAAC;IAEnC,IAAI,YAAY,EAAE,CAAC;QACjB,OAAO,IAAI,CAAA,kDAAkD,SAAS,IAAI,EAAE,KAAK,KAAK,SAAS,CAAC;IAClG,CAAC;IAED,IAAI,KAAK,GAAG,WAAW,CAAC;IACxB,IAAI,QAAQ,EAAE,CAAC;QACb,KAAK,IAAI,UAAU,kBAAkB,CAAC,QAAQ,CAAC,EAAE,CAAC;IACpD,CAAC;IACD,IAAI,QAAQ,EAAE,CAAC;QACb,KAAK,IAAI,iBAAiB,kBAAkB,CAAC,QAAQ,CAAC,EAAE,CAAC;IAC3D,CAAC;IAED,OAAO,IAAI,CAAA;;iDAEoC,SAAS,IAAI,EAAE;cAClD,SAAS,0BAA0B,KAAK;oBAClC,KAAK,SAAS,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,QAAQ;;QAE1D,KAAK;;GAEV,CAAC;AACJ,CAAC","sourcesContent":["import { html } from '@prairielearn/html';\n\nexport function IssueBadge({\n  count,\n  suppressLink,\n  issueQid,\n  issueAid,\n  urlPrefix,\n  className,\n}: {\n  count: number;\n  className?: string;\n} & (\n  | {\n      suppressLink: true;\n      urlPrefix?: undefined;\n      issueQid?: undefined;\n      issueAid?: undefined;\n    }\n  | {\n      suppressLink?: false;\n      urlPrefix: string;\n      issueQid?: string | null;\n      issueAid?: string | null;\n    }\n)) {\n  // Convert explicitly to a number because some unvalidated queries still return a string (via bigint)\n  if (Number(count) === 0) return '';\n\n  if (suppressLink) {\n    return html`<span class=\"badge rounded-pill text-bg-danger ${className ?? ''}\">${count}</span>`;\n  }\n\n  let query = 'is%3Aopen';\n  if (issueQid) {\n    query += `+qid%3A${encodeURIComponent(issueQid)}`;\n  }\n  if (issueAid) {\n    query += `+assessment%3A${encodeURIComponent(issueAid)}`;\n  }\n\n  return html`\n    <a\n      class=\"badge rounded-pill text-bg-danger ${className ?? ''}\"\n      href=\"${urlPrefix}/course_admin/issues?q=${query}\"\n      aria-label=\"${count} open ${count === 1 ? 'issue' : 'issues'}\"\n    >\n      ${count}\n    </a>\n  `;\n}\n"]}