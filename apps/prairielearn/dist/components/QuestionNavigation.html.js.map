{"version":3,"file":"QuestionNavigation.html.js","sourceRoot":"","sources":["../../src/components/QuestionNavigation.html.ts"],"names":[],"mappings":"AAAA,OAAO,EAAkB,IAAI,EAAE,MAAM,oBAAoB,CAAC;AAE1D,MAAM,UAAU,oBAAoB,CAAC,EACnC,SAAS,EACT,sBAAsB,EACtB,sBAAsB,EACtB,cAAc,EACd,wBAAwB,EACxB,wBAAwB,EACxB,gBAAgB,EAChB,cAAc,GAUf;IACC,OAAO,IAAI,CAAA;;QAEL,qBAAqB,CAAC;QACtB,kBAAkB,EAAE,sBAAsB;QAC1C,SAAS;QACT,WAAW,EAAE,UAAU;QACvB,oBAAoB,EAAE,wBAAwB;QAC9C,cAAc;KACf,CAAC;QACA,qBAAqB,CAAC;QACtB,kBAAkB,EAAE,sBAAsB;QAC1C,cAAc;QACd,SAAS;QACT,WAAW,EAAE,MAAM;QACnB,oBAAoB,EAAE,wBAAwB;QAC9C,gBAAgB;QAChB,cAAc;KACf,CAAC;;GAEL,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,qBAAqB,CAAC,EACpC,kBAAkB,EAClB,cAAc,EACd,SAAS,EACT,WAAW,EACX,oBAAoB,EACpB,gBAAgB,EAChB,cAAc,GASf;IACC,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,GAC7B,WAAW,KAAK,MAAM;QACpB,CAAC,CAAC,EAAE,QAAQ,EAAE,mBAAmB,EAAE,WAAW,EAAE,eAAe,EAAE;QACjE,CAAC,CAAC,EAAE,QAAQ,EAAE,mBAAmB,EAAE,WAAW,EAAE,mBAAmB,EAAE,CAAC;IAC1E,IAAI,mBAAmB,GAAqB,IAAI,CAAC;IAEjD,IAAI,kBAAkB,IAAI,IAAI,EAAE,CAAC;QAC/B,OAAO,IAAI,CAAA;oBACK,QAAQ;UAClB,WAAW;;KAEhB,CAAC;IACJ,CAAC;IAED,IAAI,oBAAoB,EAAE,QAAQ,KAAK,KAAK,EAAE,CAAC;QAC7C,mBAAmB,GAAG,IAAI,CAAA,4BAA4B,cAAc;MAClE,WAAW,CAAC,WAAW,EAAE,GAAG,CAAC;IACjC,CAAC;SAAM,IAAI,cAAc,EAAE,CAAC;QAC1B,mBAAmB,GAAG,IAAI,CAAA,8BAA8B,gBAAgB;;iCAE3C,CAAC;IAChC,CAAC;IAED,IAAI,mBAAmB,IAAI,IAAI,EAAE,CAAC;QAChC,OAAO,IAAI,CAAA;;cAED,QAAQ;;;;;2BAKK,mBAAmB;;UAEpC,WAAW;;;KAGhB,CAAC;IACJ,CAAC;IAED,OAAO,IAAI,CAAA;;YAED,QAAQ;;cAEN,SAAS,sBAAsB,kBAAkB;;QAEvD,WAAW;;GAEhB,CAAC;AACJ,CAAC","sourcesContent":["import { type HtmlValue, html } from '@prairielearn/html';\n\nexport function QuestionNavSideGroup({\n  urlPrefix,\n  prevInstanceQuestionId,\n  nextInstanceQuestionId,\n  sequenceLocked,\n  prevGroupRolePermissions,\n  nextGroupRolePermissions,\n  advanceScorePerc,\n  userGroupRoles,\n}: {\n  urlPrefix: string;\n  prevInstanceQuestionId: string;\n  nextInstanceQuestionId: string;\n  sequenceLocked: boolean | null;\n  prevGroupRolePermissions: { can_view?: boolean } | null;\n  nextGroupRolePermissions: { can_view?: boolean } | null;\n  advanceScorePerc: number | null;\n  userGroupRoles: string | null;\n}) {\n  return html`\n    <div class=\"text-center mb-2\">\n      ${QuestionNavSideButton({\n        instanceQuestionId: prevInstanceQuestionId,\n        urlPrefix,\n        whichButton: 'previous',\n        groupRolePermissions: prevGroupRolePermissions,\n        userGroupRoles,\n      })}\n      ${QuestionNavSideButton({\n        instanceQuestionId: nextInstanceQuestionId,\n        sequenceLocked,\n        urlPrefix,\n        whichButton: 'next',\n        groupRolePermissions: nextGroupRolePermissions,\n        advanceScorePerc,\n        userGroupRoles,\n      })}\n    </div>\n  `;\n}\n\nexport function QuestionNavSideButton({\n  instanceQuestionId,\n  sequenceLocked,\n  urlPrefix,\n  whichButton,\n  groupRolePermissions,\n  advanceScorePerc,\n  userGroupRoles,\n}: {\n  instanceQuestionId: string | null;\n  sequenceLocked?: boolean | null;\n  groupRolePermissions: { can_view?: boolean } | null;\n  whichButton: 'next' | 'previous';\n  urlPrefix: string;\n  advanceScorePerc?: number | null;\n  userGroupRoles: string | null;\n}) {\n  const { buttonId, buttonLabel } =\n    whichButton === 'next'\n      ? { buttonId: 'question-nav-next', buttonLabel: 'Next question' }\n      : { buttonId: 'question-nav-prev', buttonLabel: 'Previous question' };\n  let disabledExplanation: HtmlValue | null = null;\n\n  if (instanceQuestionId == null) {\n    return html`\n      <button id=\"${buttonId}\" class=\"btn btn-primary mb-3 disabled\" disabled>\n        ${buttonLabel}\n      </button>\n    `;\n  }\n\n  if (groupRolePermissions?.can_view === false) {\n    disabledExplanation = html`Your current group role (${userGroupRoles}) restricts access to the\n    ${buttonLabel.toLowerCase()}.`;\n  } else if (sequenceLocked) {\n    disabledExplanation = html`You must score at least <b>${advanceScorePerc}%</b> on a submission\n      to this question in order to unlock the next. If you run out of attempts, the next question\n      will unlock automatically.`;\n  }\n\n  if (disabledExplanation != null) {\n    return html`\n      <button\n        id=\"${buttonId}\"\n        class=\"btn btn-secondary mb-3 pl-sequence-locked\"\n        data-bs-toggle=\"popover\"\n        data-bs-container=\"body\"\n        data-bs-html=\"true\"\n        data-bs-content=\"${disabledExplanation}\"\n      >\n        ${buttonLabel}\n        <i class=\"fas fa-lock ms-1\" aria-label=\"Locked\"></i>\n      </button>\n    `;\n  }\n\n  return html`\n    <a\n      id=\"${buttonId}\"\n      class=\"btn btn-primary mb-3\"\n      href=\"${urlPrefix}/instance_question/${instanceQuestionId}/\"\n    >\n      ${buttonLabel}\n    </a>\n  `;\n}\n"]}