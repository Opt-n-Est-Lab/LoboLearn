{"version":3,"file":"administratorInstitutionCourseInstance.html.js","sourceRoot":"","sources":["../../../../src/ee/pages/administratorInstitutionCourseInstance/administratorInstitutionCourseInstance.html.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,oBAAoB,CAAC;AAE1C,OAAO,EAAE,UAAU,EAAE,MAAM,wCAAwC,CAAC;AACpE,OAAO,EAAE,iBAAiB,EAAE,MAAM,wBAAwB,CAAC;AAC3D,OAAO,EAKN,MAAM,0BAA0B,CAAC;AAClC,OAAO,EAAE,gBAAgB,EAAE,MAAM,uDAAuD,CAAC;AAEzF,MAAM,UAAU,sCAAsC,CAAC,EACrD,WAAW,EACX,MAAM,EACN,eAAe,EACf,UAAU,EACV,SAAS,GAOV;IACC,OAAO,UAAU,CAAC;QAChB,SAAS,EAAE,EAAE,GAAG,SAAS,EAAE,WAAW,EAAE;QACxC,SAAS,EAAE,GAAG,MAAM,CAAC,UAAU,KAAK,eAAe,CAAC,UAAU,sBAAsB;QACpF,WAAW,EAAE,CAAC,iBAAiB,CAAC,iDAAiD,CAAC,CAAC;QACnF,UAAU,EAAE;YACV,IAAI,EAAE,2BAA2B;YACjC,IAAI,EAAE,2BAA2B;YACjC,OAAO,EAAE,SAAS;SACnB;QACD,UAAU,EAAE,IAAI,CAAA;;;;qDAIiC,WAAW,CAAC,EAAE;;;qDAGd,WAAW,CAAC,EAAE,WAAW,MAAM,CAAC,EAAE;gBACvE,MAAM,CAAC,UAAU,KAAK,MAAM,CAAC,KAAK;;;;cAIpC,eAAe,CAAC,UAAU,IAAI,GAAG,KAAK,eAAe,CAAC,SAAS,IAAI,GAAG;;;;KAI/E;QACD,OAAO,EAAE,IAAI,CAAA;;uCAEsB,eAAe,CAAC,EAAE;;;;;;;;;;;;;;qBAcpC,WAAW,CAAC,gCAAgC;;;;;;;;;;;;;;;;qBAgB5C,MAAM,CAAC,gCAAgC;;;;;;;;;;;;;;qBAcvC,eAAe,CAAC,gBAAgB;;;;;;;0DAOK,SAAS,CAAC,YAAY;;;;;;;;;;;;QAYxE,gBAAgB,CAAC;YACjB,UAAU;YACV,4EAA4E;YAC5E,4CAA4C;YAC5C,iBAAiB,EAAE,CAAC,OAAO,CAAC;YAC5B,SAAS,EAAE,SAAS,CAAC,YAAY;SAClC,CAAC;KACH;KACF,CAAC,CAAC;AACL,CAAC","sourcesContent":["import { html } from '@prairielearn/html';\n\nimport { PageLayout } from '../../../components/PageLayout.html.js';\nimport { compiledScriptTag } from '../../../lib/assets.js';\nimport {\n  type Course,\n  type CourseInstance,\n  type Institution,\n  type PlanGrant,\n} from '../../../lib/db-types.js';\nimport { PlanGrantsEditor } from '../../lib/billing/components/PlanGrantsEditor.html.js';\n\nexport function AdministratorInstitutionCourseInstance({\n  institution,\n  course,\n  course_instance,\n  planGrants,\n  resLocals,\n}: {\n  institution: Institution;\n  course: Course;\n  course_instance: CourseInstance;\n  planGrants: PlanGrant[];\n  resLocals: Record<string, any>;\n}) {\n  return PageLayout({\n    resLocals: { ...resLocals, institution },\n    pageTitle: `${course.short_name}, ${course_instance.short_name} - Institution Admin`,\n    headContent: [compiledScriptTag('administratorInstitutionCourseInstanceClient.ts')],\n    navContext: {\n      type: 'administrator_institution',\n      page: 'administrator_institution',\n      subPage: 'courses',\n    },\n    preContent: html`\n      <nav class=\"container\" aria-label=\"Breadcrumbs\">\n        <ol class=\"breadcrumb\">\n          <li class=\"breadcrumb-item\">\n            <a href=\"/pl/administrator/institution/${institution.id}/courses\">Courses</a>\n          </li>\n          <li class=\"breadcrumb-item\">\n            <a href=\"/pl/administrator/institution/${institution.id}/course/${course.id}\">\n              ${course.short_name}: ${course.title}\n            </a>\n          </li>\n          <li class=\"breadcrumb-item active\" aria-current=\"page\">\n            ${course_instance.short_name ?? '—'}: ${course_instance.long_name ?? '—'}\n          </li>\n        </ol>\n      </nav>\n    `,\n    content: html`\n      <p>\n        <a href=\"/pl/course_instance/${course_instance.id}/instructor\">View as instructor</a>\n      </p>\n\n      <h2 class=\"h4\">Limits</h2>\n      <form method=\"POST\" class=\"mb-3\">\n        <div class=\"mb-3\">\n          <label class=\"form-label\" for=\"course_instance_enrollment_limit_from_institution\">\n            Enrollment limit from institution\n          </label>\n          <input\n            type=\"number\"\n            disabled\n            class=\"form-control\"\n            id=\"course_instance_enrollment_limit_from_institution\"\n            value=\"${institution.course_instance_enrollment_limit}\"\n          />\n          <small class=\"form-text text-muted\">\n            This limit applies to all course instances without a specific enrollment limit set.\n          </small>\n        </div>\n\n        <div class=\"mb-3\">\n          <label class=\"form-label\" for=\"course_instance_enrollment_limit_from_course\">\n            Enrollment limit from course\n          </label>\n          <input\n            type=\"number\"\n            disabled\n            class=\"form-control\"\n            id=\"course_instance_enrollment_limit_from_course\"\n            value=\"${course.course_instance_enrollment_limit}\"\n          />\n          <small class=\"form-text text-muted\">\n            This limit applies to all course instances without a specific enrollment limit set.\n          </small>\n        </div>\n\n        <div class=\"mb-3\">\n          <label class=\"form-label\" for=\"enrollment_limit\">Enrollment limit override</label>\n          <input\n            type=\"number\"\n            class=\"form-control\"\n            id=\"enrollment_limit\"\n            name=\"enrollment_limit\"\n            value=\"${course_instance.enrollment_limit}\"\n          />\n          <small class=\"form-text text-muted\">\n            This limit overrides any course-wide or institution-wide limits. If no override is set,\n            the enrollment limit from either the course or the institution (if any) will be used.\n          </small>\n        </div>\n        <input type=\"hidden\" name=\"__csrf_token\" value=\"${resLocals.__csrf_token}\" />\n        <button\n          type=\"submit\"\n          name=\"__action\"\n          value=\"update_enrollment_limit\"\n          class=\"btn btn-primary\"\n        >\n          Save\n        </button>\n      </form>\n\n      <h2 class=\"h4\">Plans</h2>\n      ${PlanGrantsEditor({\n        planGrants,\n        // The basic plan is never available at the course instance level; it's only\n        // used for student billing for enrollments.\n        excludedPlanNames: ['basic'],\n        csrfToken: resLocals.__csrf_token,\n      })}\n    `,\n  });\n}\n"]}