{"version":3,"file":"administratorInstitution.js","sourceRoot":"","sources":["../../../src/ee/routers/administratorInstitution.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,MAAM,EAAE,MAAM,SAAS,CAAC;AACjC,OAAO,YAAY,MAAM,uBAAuB,CAAC;AAEjD,OAAO,EAAE,QAAQ,EAAE,MAAM,6BAA6B,CAAC;AACvD,OAAO,oBAAoB,MAAM,2CAA2C,CAAC;AAC7E,OAAO,WAAW,MAAM,2EAA2E,CAAC;AACpG,OAAO,YAAY,MAAM,2EAA2E,CAAC;AACrG,OAAO,oBAAoB,MAAM,2FAA2F,CAAC;AAC7H,OAAO,aAAa,MAAM,6EAA6E,CAAC;AACxG,OAAO,aAAa,MAAM,6EAA6E,CAAC;AACxG,OAAO,WAAW,MAAM,yEAAyE,CAAC;AAClG,OAAO,UAAU,MAAM,uEAAuE,CAAC;AAC/F,OAAO,SAAS,MAAM,qEAAqE,CAAC;AAE5F,MAAM,MAAM,GAAG,MAAM,CAAC,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC,CAAC;AAE7C,MAAM,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;AAEjC,MAAM,CAAC,GAAG,CACR,YAAY,CAAC,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;IACpC,sCAAsC;IACtC,GAAG,CAAC,MAAM,CAAC,SAAS,GAAG,GAAG,CAAC,OAAO,CAAC;IAEnC,MAAM,QAAQ,GAAG,MAAM,QAAQ,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,cAAc,EAAE,GAAG,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC,CAAC;IAChG,GAAG,CAAC,MAAM,CAAC,aAAa,GAAG,QAAQ,CAAC;IAEpC,MAAM,qBAAqB,GAAG,MAAM,QAAQ,CAAC,OAAO,CAAC,qBAAqB,EAAE;QAC1E,cAAc,EAAE,GAAG,CAAC,MAAM,CAAC,cAAc;QACzC,OAAO,EAAE,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC,OAAO;KACvC,CAAC,CAAC;IACH,GAAG,CAAC,MAAM,CAAC,uBAAuB,GAAG,qBAAqB,CAAC;IAC3D,IAAI,EAAE,CAAC;AACT,CAAC,CAAC,CACH,CAAC;AAEF,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,aAAa,CAAC,CAAC;AAC/B,MAAM,CAAC,GAAG,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;AACnC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,aAAa,CAAC,CAAC;AACtC,MAAM,CAAC,GAAG,CAAC,oBAAoB,EAAE,YAAY,CAAC,CAAC;AAC/C,MAAM,CAAC,GAAG,CAAC,sCAAsC,EAAE,oBAAoB,CAAC,CAAC;AACzE,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;AAC9B,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;AAChC,MAAM,CAAC,GAAG,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;AAElC,eAAe,MAAM,CAAC","sourcesContent":["import { Router } from 'express';\nimport asyncHandler from 'express-async-handler';\n\nimport { features } from '../../lib/features/index.js';\nimport authzIsAdministrator from '../../middlewares/authzIsAdministrator.js';\nimport adminRouter from '../pages/administratorInstitutionAdmins/administratorInstitutionAdmins.js';\nimport courseRouter from '../pages/administratorInstitutionCourse/administratorInstitutionCourse.js';\nimport courseInstanceRouter from '../pages/administratorInstitutionCourseInstance/administratorInstitutionCourseInstance.js';\nimport coursesRouter from '../pages/administratorInstitutionCourses/administratorInstitutionCourses.js';\nimport generalRouter from '../pages/administratorInstitutionGeneral/administratorInstitutionGeneral.js';\nimport lti13Router from '../pages/administratorInstitutionLti13/administratorInstitutionLti13.js';\nimport samlRouter from '../pages/administratorInstitutionSaml/administratorInstitutionSaml.js';\nimport ssoRouter from '../pages/administratorInstitutionSso/administratorInstitutionSso.js';\n\nconst router = Router({ mergeParams: true });\n\nrouter.use(authzIsAdministrator);\n\nrouter.use(\n  asyncHandler(async (req, res, next) => {\n    // The navbar relies on this property.\n    res.locals.urlPrefix = req.baseUrl;\n\n    const hasLti13 = await features.enabled('lti13', { institution_id: req.params.institution_id });\n    res.locals.lti13_enabled = hasLti13;\n\n    const hasEnhancedNavigation = await features.enabled('enhanced-navigation', {\n      institution_id: req.params.institution_id,\n      user_id: res.locals.authn_user.user_id,\n    });\n    res.locals.has_enhanced_navigation = hasEnhancedNavigation;\n    next();\n  }),\n);\n\nrouter.use('/', generalRouter);\nrouter.use('/admins', adminRouter);\nrouter.use('/courses', coursesRouter);\nrouter.use('/course/:course_id', courseRouter);\nrouter.use('/course_instance/:course_instance_id', courseInstanceRouter);\nrouter.use('/sso', ssoRouter);\nrouter.use('/saml', samlRouter);\nrouter.use('/lti13', lti13Router);\n\nexport default router;\n"]}