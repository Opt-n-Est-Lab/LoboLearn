{"version":3,"file":"url.js","sourceRoot":"","sources":["../../src/lib/url.ts"],"names":[],"mappings":"AAAA,OAAO,EAAgB,MAAM,SAAS,CAAC;AAEvC,OAAO,EAAE,MAAM,EAAE,MAAM,aAAa,CAAC;AAErC,MAAM,UAAU,gBAAgB,CAAC,GAAY;IAC3C,IAAI,MAAM,CAAC,mBAAmB;QAAE,OAAO,MAAM,CAAC,mBAAmB,CAAC;IAClE,OAAO,GAAG,GAAG,CAAC,QAAQ,MAAM,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC;AAChD,CAAC;AAED,MAAM,UAAU,eAAe,CAAC,GAAY;IAC1C,OAAO,IAAI,GAAG,CAAC,GAAG,CAAC,WAAW,EAAE,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,YAAY,CAAC;AACtE,CAAC","sourcesContent":["import { type Request } from 'express';\n\nimport { config } from './config.js';\n\nexport function getCanonicalHost(req: Request): string {\n  if (config.serverCanonicalHost) return config.serverCanonicalHost;\n  return `${req.protocol}://${req.get('host')}`;\n}\n\nexport function getSearchParams(req: Request): URLSearchParams {\n  return new URL(req.originalUrl, getCanonicalHost(req)).searchParams;\n}\n"]}