{"version":3,"file":"administratorAdmins.html.js","sourceRoot":"","sources":["../../../src/pages/administratorAdmins/administratorAdmins.html.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,UAAU,EAAE,IAAI,EAAE,MAAM,oBAAoB,CAAC;AAEtD,OAAO,EAAE,UAAU,EAAE,MAAM,qCAAqC,CAAC;AACjE,OAAO,EAAa,MAAM,uBAAuB,CAAC;AAElD,MAAM,UAAU,mBAAmB,CAAC,EAClC,MAAM,EACN,SAAS,GAIV;IACC,OAAO,UAAU,CAAC;QAChB,SAAS;QACT,SAAS,EAAE,gBAAgB;QAC3B,UAAU,EAAE;YACV,IAAI,EAAE,OAAO;YACb,IAAI,EAAE,OAAO;YACb,OAAO,EAAE,gBAAgB;SAC1B;QACD,OAAO,EAAE;YACP,SAAS,EAAE,IAAI;SAChB;QACD,OAAO,EAAE,IAAI,CAAA;;;;;;;;;;;;+BAYc,UAAU,CAC3B,uBAAuB,CAAC;YACtB,SAAS,EAAE,SAAS,CAAC,YAAY;SAClC,CAAC,CACH;;;;;;;;;;;;;;;;;;;gBAmBG,MAAM,CAAC,GAAG,CACV,CAAC,KAAK,EAAE,EAAE,CAAC,IAAI,CAAA;;+CAEgB,KAAK,CAAC,GAAG;+CACT,KAAK,CAAC,IAAI;;;;;;;;;;2CAUd,UAAU,CAC3B,uBAAuB,CAAC;YACtB,SAAS,EAAE,SAAS,CAAC,YAAY;YACjC,GAAG,EAAE,KAAK,CAAC,GAAG;YACd,MAAM,EAAE,KAAK,CAAC,OAAO;SACtB,CAAC,CACH;;;;;;iBAMR,CACF;;;;;;;;;;;;;KAaV;KACF,CAAC,CAAC;AACL,CAAC;AAED,SAAS,uBAAuB,CAAC,EAAE,SAAS,EAAyB;IACnE,OAAO,IAAI,CAAA;;;wDAG2C,SAAS;;;;;;;;;;;;;;;;GAgB9D,CAAC;AACJ,CAAC;AAED,SAAS,uBAAuB,CAAC,EAC/B,SAAS,EACT,MAAM,EACN,GAAG,GAKJ;IACC,OAAO,IAAI,CAAA;;;wDAG2C,SAAS;mDACd,MAAM;gDACT,GAAG;;;;;;GAMhD,CAAC;AACJ,CAAC","sourcesContent":["import { escapeHtml, html } from '@prairielearn/html';\n\nimport { PageLayout } from '../../components/PageLayout.html.js';\nimport { type User } from '../../lib/db-types.js';\n\nexport function AdministratorAdmins({\n  admins,\n  resLocals,\n}: {\n  admins: User[];\n  resLocals: Record<string, any>;\n}) {\n  return PageLayout({\n    resLocals,\n    pageTitle: 'Administrators',\n    navContext: {\n      type: 'plain',\n      page: 'admin',\n      subPage: 'administrators',\n    },\n    options: {\n      fullWidth: true,\n    },\n    content: html`\n      <div class=\"card mb-4\">\n        <div class=\"card-header bg-primary text-white d-flex align-items-center\">\n          <h1>Administrators</h1>\n          <button\n            type=\"button\"\n            class=\"btn btn-sm btn-light ms-auto\"\n            data-bs-toggle=\"popover\"\n            data-bs-container=\"body\"\n            data-bs-html=\"true\"\n            data-bs-placement=\"auto\"\n            data-bs-title=\"Add new administrator\"\n            data-bs-content=\"${escapeHtml(\n              AdministratorInsertForm({\n                csrfToken: resLocals.__csrf_token,\n              }),\n            )}\"\n            data-testid=\"administrator-insert-button\"\n          >\n            <i class=\"fa fa-user-plus\" aria-hidden=\"true\"></i>\n            <span class=\"d-none d-sm-inline\">Add administrator</span>\n          </button>\n        </div>\n\n        <div class=\"table-responsive\">\n          <table class=\"table table-sm table-hover table-striped\" aria-label=\"Administrators\">\n            <thead>\n              <tr>\n                <th>UID</th>\n                <th>Name</th>\n                <th>Actions</th>\n              </tr>\n            </thead>\n\n            <tbody>\n              ${admins.map(\n                (admin) => html`\n                  <tr>\n                    <td class=\"align-middle\">${admin.uid}</td>\n                    <td class=\"align-middle\">${admin.name}</td>\n                    <td class=\"align-middle\">\n                      <button\n                        type=\"button\"\n                        class=\"btn btn-sm btn-danger float-end\"\n                        data-bs-toggle=\"popover\"\n                        data-bs-container=\"body\"\n                        data-bs-html=\"true\"\n                        data-bs-placement=\"auto\"\n                        data-bs-title=\"Remove administrator access\"\n                        data-bs-content=\"${escapeHtml(\n                          AdministratorDeleteForm({\n                            csrfToken: resLocals.__csrf_token,\n                            uid: admin.uid,\n                            userId: admin.user_id,\n                          }),\n                        )}\"\n                      >\n                        <i class=\"fa fa-times\" aria-hidden=\"true\"></i> Remove\n                      </button>\n                    </td>\n                  </tr>\n                `,\n              )}\n            </tbody>\n          </table>\n        </div>\n\n        <div class=\"card-footer\">\n          <small>\n            Administrators have full access to every course and course instance. They are\n            automatically Owners of every course and Instructors of every course instance. They can\n            add and remove other administrators.\n          </small>\n        </div>\n      </div>\n    `,\n  });\n}\n\nfunction AdministratorInsertForm({ csrfToken }: { csrfToken: string }) {\n  return html`\n    <form name=\"add-user-form\" method=\"POST\">\n      <input type=\"hidden\" name=\"__action\" value=\"administrators_insert_by_user_uid\" />\n      <input type=\"hidden\" name=\"__csrf_token\" value=\"${csrfToken}\" />\n      <div class=\"mb-3\">\n        <label class=\"form-label\" for=\"administratorInsertFormUid\">UID:</label>\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          id=\"administratorInsertFormUid\"\n          name=\"uid\"\n          placeholder=\"username@example.com\"\n        />\n      </div>\n      <div class=\"text-right\">\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"popover\">Cancel</button>\n        <button type=\"submit\" class=\"btn btn-primary\">Add administrator</button>\n      </div>\n    </form>\n  `;\n}\n\nfunction AdministratorDeleteForm({\n  csrfToken,\n  userId,\n  uid,\n}: {\n  csrfToken: string;\n  userId: string;\n  uid: string;\n}) {\n  return html`\n    <form name=\"add-user-form\" method=\"POST\">\n      <input type=\"hidden\" name=\"__action\" value=\"administrators_delete_by_user_id\" />\n      <input type=\"hidden\" name=\"__csrf_token\" value=\"${csrfToken}\" />\n      <input type=\"hidden\" name=\"user_id\" value=\"${userId}\" />\n      <div class=\"mb-3\"><strong>UID:</strong> ${uid}</div>\n      <div class=\"text-right\">\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"popover\">Cancel</button>\n        <button type=\"submit\" class=\"btn btn-primary\">Remove access</button>\n      </div>\n    </form>\n  `;\n}\n"]}