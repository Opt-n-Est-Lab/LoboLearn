{"version":3,"file":"clientFilesCourse.js","sourceRoot":"","sources":["../../../src/pages/clientFilesCourse/clientFilesCourse.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,IAAI,MAAM,WAAW,CAAC;AAElC,OAAO,EAAE,MAAM,EAAE,MAAM,SAAS,CAAC;AACjC,OAAO,YAAY,MAAM,uBAAuB,CAAC;AAEjD,OAAO,EAAE,eAAe,EAAE,MAAM,qBAAqB,CAAC;AAEtD,OAAO,EAAE,0BAA0B,EAAE,4BAA4B,EAAE,MAAM,qBAAqB,CAAC;AAE/F,MAAM,MAAM,GAAG,MAAM,CAAC,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC,CAAC;AAE7C,MAAM,CAAC,GAAG,CACR,IAAI,EACJ,YAAY,CAAC,KAAK,WAAW,GAAG,EAAE,GAAG;IACnC,MAAM,QAAQ,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IAC/B,IAAI,CAAC,QAAQ,EAAE,CAAC;QACd,MAAM,IAAI,eAAe,CAAC,GAAG,EAAE,yDAAyD,CAAC,CAAC;IAC5F,CAAC;IACD,MAAM,UAAU,GAAG,4BAA4B,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IACnE,MAAM,0BAA0B,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,mBAAmB,EAAE,CAAC,CAAC;IAEtF,MAAM,cAAc,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,mBAAmB,CAAC,CAAC;IAClE,GAAG,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE,IAAI,EAAE,cAAc,EAAE,CAAC,CAAC;AACnD,CAAC,CAAC,CACH,CAAC;AAEF,eAAe,MAAM,CAAC","sourcesContent":["import * as path from 'node:path';\n\nimport { Router } from 'express';\nimport asyncHandler from 'express-async-handler';\n\nimport { HttpStatusError } from '@prairielearn/error';\n\nimport { ensureChunksForCourseAsync, getRuntimeDirectoryForCourse } from '../../lib/chunks.js';\n\nconst router = Router({ mergeParams: true });\n\nrouter.get(\n  '/*',\n  asyncHandler(async function (req, res) {\n    const filename = req.params[0];\n    if (!filename) {\n      throw new HttpStatusError(400, 'No filename provided within clientFilesCourse directory');\n    }\n    const coursePath = getRuntimeDirectoryForCourse(res.locals.course);\n    await ensureChunksForCourseAsync(res.locals.course.id, { type: 'clientFilesCourse' });\n\n    const clientFilesDir = path.join(coursePath, 'clientFilesCourse');\n    res.sendFile(filename, { root: clientFilesDir });\n  }),\n);\n\nexport default router;\n"]}