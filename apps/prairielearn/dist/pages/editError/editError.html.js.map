{"version":3,"file":"editError.html.js","sourceRoot":"","sources":["../../../src/pages/editError/editError.html.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,oBAAoB,CAAC;AAE1C,OAAO,EAAE,YAAY,EAAE,MAAM,uCAAuC,CAAC;AACrE,OAAO,EAAE,kBAAkB,EAAE,MAAM,6CAA6C,CAAC;AACjF,OAAO,EAAE,MAAM,EAAE,MAAM,iCAAiC,CAAC;AACzD,OAAO,EAAE,MAAM,EAAE,MAAM,qBAAqB,CAAC;AAG7C,MAAM,UAAU,SAAS,CAAC,EACxB,SAAS,EACT,WAAW,EACX,UAAU,GAKX;IACC,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,GAAG,SAAS,CAAC;IAE3C,OAAO,IAAI,CAAA;;;;UAIH,YAAY,CAAC,EAAE,SAAS,EAAE,SAAS,EAAE,cAAc,EAAE,CAAC;;;;UAItD,MAAM,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBA+BjC,UAAU;QACV,CAAC,CAAC,IAAI,CAAA;;;4BAGM,MAAM,CAAC,gBAAgB;YAC3B,CAAC,CAAC,kDAAkD;YACpD,CAAC,CAAC,EAAE;;;;;;wEAM4C,YAAY;;;;;;;mBAOjE;QACH,CAAC,CAAC,IAAI,CAAA,sCAAsC;;;;;cAK9C,kBAAkB,CAAC,EAAE,MAAM,EAAE,WAAW,EAAE,CAAC;;;;;GAKtD,CAAC,QAAQ,EAAE,CAAC;AACf,CAAC","sourcesContent":["import { html } from '@prairielearn/html';\n\nimport { HeadContents } from '../../components/HeadContents.html.js';\nimport { JobSequenceResults } from '../../components/JobSequenceResults.html.js';\nimport { Navbar } from '../../components/Navbar.html.js';\nimport { config } from '../../lib/config.js';\nimport type { JobSequenceWithTokens } from '../../lib/server-jobs.types.js';\n\nexport function EditError({\n  resLocals,\n  jobSequence,\n  failedSync,\n}: {\n  resLocals: any;\n  jobSequence: JobSequenceWithTokens;\n  failedSync: boolean;\n}) {\n  const { course, __csrf_token } = resLocals;\n\n  return html`\n    <!doctype html>\n    <html lang=\"en\">\n      <head>\n        ${HeadContents({ resLocals, pageTitle: 'Edit Failure' })}\n      </head>\n\n      <body>\n        ${Navbar({ resLocals, navPage: 'error' })}\n\n        <main id=\"content\" class=\"container\">\n          <script>\n            $(function () {\n              const button = document.querySelector('#job-sequence-results-button');\n              $('#job-sequence-results')\n                .on('show.bs.collapse', () => {\n                  button.textContent = 'Hide detail';\n                })\n                .on('hide.bs.collapse', () => {\n                  button.textContent = 'Show detail';\n                });\n            });\n          </script>\n\n          <div class=\"card mb-4\">\n            <div class=\"card-header bg-danger text-white d-flex align-items-center\">\n              <h1>Edit Failure</h1>\n              <button\n                type=\"button\"\n                class=\"btn btn-light btn-sm ms-auto\"\n                data-bs-toggle=\"collapse\"\n                data-bs-target=\"#job-sequence-results\"\n                id=\"job-sequence-results-button\"\n              >\n                Show detail\n              </button>\n            </div>\n            <div class=\"card-body\">\n              <p>The file edit did not complete successfully.</p>\n              ${failedSync\n                ? html`\n                    <p>\n                      In particular, it looks like your changes were written to\n                      disk${config.fileEditorUseGit\n                        ? ' and were pushed to the remote GitHub repository'\n                        : ''},\n                      but that there was a failure to sync these changes to the database. The most\n                      likely cause is broken course content. Please fix this content, then click\n                      <strong>Pull from remote GitHub repository</strong> to try again.\n                    </p>\n                    <form method=\"POST\">\n                      <input type=\"hidden\" name=\"__csrf_token\" value=\"${__csrf_token}\" />\n                      <div class=\"mx-4\">\n                        <button name=\"__action\" value=\"pull\" class=\"btn btn-primary\">\n                          Pull from remote GitHub repository\n                        </button>\n                      </div>\n                    </form>\n                  `\n                : html`<p>Please go back and try again.</p>`}\n            </div>\n          </div>\n\n          <div class=\"collapse\" id=\"job-sequence-results\">\n            ${JobSequenceResults({ course, jobSequence })}\n          </div>\n        </main>\n      </body>\n    </html>\n  `.toString();\n}\n"]}