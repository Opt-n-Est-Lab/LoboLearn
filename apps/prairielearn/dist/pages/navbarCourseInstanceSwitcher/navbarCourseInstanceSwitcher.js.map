{"version":3,"file":"navbarCourseInstanceSwitcher.js","sourceRoot":"","sources":["../../../src/pages/navbarCourseInstanceSwitcher/navbarCourseInstanceSwitcher.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,MAAM,EAAE,MAAM,SAAS,CAAC;AACjC,OAAO,YAAY,MAAM,uBAAuB,CAAC;AAEjD,OAAO,EAAE,oCAAoC,EAAE,MAAM,kCAAkC,CAAC;AAExF,OAAO,EAAE,4BAA4B,EAAE,MAAM,wCAAwC,CAAC;AAEtF,MAAM,MAAM,GAAG,MAAM,CAAC;IACpB,WAAW,EAAE,IAAI,EAAE,sGAAsG;CAC1H,CAAC,CAAC;AAEH,MAAM,CAAC,GAAG,CACR,GAAG,EACH,YAAY,CAAC,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE;IAC9B,MAAM,gBAAgB,GAAG,MAAM,oCAAoC,CAAC;QAClE,SAAS,EAAE,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE;QAC/B,OAAO,EAAE,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO;QAChC,aAAa,EAAE,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC,OAAO;QAC5C,gBAAgB,EAAE,GAAG,CAAC,MAAM,CAAC,gBAAgB;QAC7C,sBAAsB,EAAE,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC,sBAAsB;KACrE,CAAC,CAAC;IAEH,GAAG,CAAC,IAAI,CACN,4BAA4B,CAAC;QAC3B,gBAAgB;QAChB,0BAA0B,EAAE,GAAG,CAAC,MAAM,CAAC,kBAAkB,IAAI,IAAI;QACjE,cAAc,EAAE,GAAG,CAAC,MAAM,CAAC,cAAc;KAC1C,CAAC,CACH,CAAC;AACJ,CAAC,CAAC,CACH,CAAC;AAEF,eAAe,MAAM,CAAC","sourcesContent":["import { Router } from 'express';\nimport asyncHandler from 'express-async-handler';\n\nimport { selectCourseInstancesWithStaffAccess } from '../../models/course-instances.js';\n\nimport { NavbarCourseInstanceSwitcher } from './navbarCourseInstanceSwitcher.html.js';\n\nconst router = Router({\n  mergeParams: true, // Ensures that navbarCourseSwitcher can retrieve req.params.course_instance_id from the parent router\n});\n\nrouter.get(\n  '/',\n  asyncHandler(async (req, res) => {\n    const course_instances = await selectCourseInstancesWithStaffAccess({\n      course_id: res.locals.course.id,\n      user_id: res.locals.user.user_id,\n      authn_user_id: res.locals.authn_user.user_id,\n      is_administrator: res.locals.is_administrator,\n      authn_is_administrator: res.locals.authz_data.authn_is_administrator,\n    });\n\n    res.send(\n      NavbarCourseInstanceSwitcher({\n        course_instances,\n        current_course_instance_id: req.params.course_instance_id ?? null,\n        plainUrlPrefix: res.locals.plainUrlPrefix,\n      }),\n    );\n  }),\n);\n\nexport default router;\n"]}