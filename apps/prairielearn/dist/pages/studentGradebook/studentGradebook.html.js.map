{"version":3,"file":"studentGradebook.html.js","sourceRoot":"","sources":["../../../src/pages/studentGradebook/studentGradebook.html.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,CAAC,EAAE,MAAM,KAAK,CAAC;AAExB,OAAO,EAAE,IAAI,EAAE,MAAM,oBAAoB,CAAC;AAE1C,OAAO,EAAE,YAAY,EAAE,MAAM,uCAAuC,CAAC;AACrE,OAAO,EAAE,MAAM,EAAE,MAAM,iCAAiC,CAAC;AACzD,OAAO,EAAE,QAAQ,EAAE,MAAM,mCAAmC,CAAC;AAC7D,OAAO,EACL,0BAA0B,EAC1B,wBAAwB,EACxB,gBAAgB,EAChB,mBAAmB,GACpB,MAAM,uBAAuB,CAAC;AAE/B,MAAM,CAAC,MAAM,yBAAyB,GAAG,CAAC,CAAC,MAAM,CAAC;IAChD,qBAAqB,EAAE,gBAAgB,CAAC,KAAK,CAAC,UAAU;IACxD,KAAK,EAAE,CAAC,CAAC,MAAM,EAAE;IACjB,sBAAsB,EAAE,mBAAmB,CAAC,KAAK,CAAC,OAAO;IACzD,oBAAoB,EAAE,mBAAmB,CAAC,KAAK,CAAC,KAAK;IACrD,KAAK,EAAE,CAAC,CAAC,MAAM,EAAE;IACjB,8BAA8B,EAAE,wBAAwB,CAAC,KAAK,CAAC,UAAU;IACzE,4BAA4B,EAAE,0BAA0B,CAAC,KAAK,CAAC,4BAA4B;IAC3F,aAAa,EAAE,CAAC,CAAC,OAAO,EAAE;CAC3B,CAAC,CAAC;AAGH,MAAM,UAAU,gBAAgB,CAAC,EAC/B,SAAS,EACT,IAAI,EACJ,WAAW,GAKZ;IACC,OAAO,IAAI,CAAA;;;;UAIH,YAAY,CAAC,EAAE,SAAS,EAAE,SAAS,EAAE,WAAW,EAAE,CAAC;;;UAGnD,MAAM,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,WAAW,EAAE,UAAU,EAAE,WAAW,EAAE,CAAC;;;;;;4CAMlC,SAAS,CAAC,eAAe,CAAC,EAAE,cAAc,WAAW;;;;;;;;;;;;;;;;;;kBAkB/E,IAAI,CAAC,GAAG,CACR,CAAC,GAAG,EAAE,EAAE,CAAC,IAAI,CAAA;sBACT,GAAG,CAAC,aAAa;QACjB,CAAC,CAAC,IAAI,CAAA;;8CAEkB,GAAG,CAAC,sBAAsB;;yBAE/C;QACH,CAAC,CAAC,EAAE;;;mDAGyB,GAAG,CAAC,oBAAoB,KAAK,GAAG,CAAC,KAAK;;;0BAG/D,GAAG,CAAC,KAAK;0BACT,GAAG,CAAC,qBAAqB;QACzB,CAAC,CAAC,IAAI,CAAA,iDAAiD;QACvD,CAAC,CAAC,EAAE;;;0BAGJ,GAAG,CAAC,4BAA4B;QAChC,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,8BAA8B,EAAE,EAAE,OAAO,EAAE,SAAS,EAAE,CAAC;QACtE,CAAC,CAAC,iBAAiB;;;mBAG1B,CACF;;;;;;;GAOd,CAAC,QAAQ,EAAE,CAAC;AACf,CAAC","sourcesContent":["import { z } from 'zod';\n\nimport { html } from '@prairielearn/html';\n\nimport { HeadContents } from '../../components/HeadContents.html.js';\nimport { Navbar } from '../../components/Navbar.html.js';\nimport { Scorebar } from '../../components/Scorebar.html.js';\nimport {\n  AssessmentAccessRuleSchema,\n  AssessmentInstanceSchema,\n  AssessmentSchema,\n  AssessmentSetSchema,\n} from '../../lib/db-types.js';\n\nexport const StudentGradebookRowSchema = z.object({\n  assessment_group_work: AssessmentSchema.shape.group_work,\n  title: z.string(),\n  assessment_set_heading: AssessmentSetSchema.shape.heading,\n  assessment_set_color: AssessmentSetSchema.shape.color,\n  label: z.string(),\n  assessment_instance_score_perc: AssessmentInstanceSchema.shape.score_perc,\n  show_closed_assessment_score: AssessmentAccessRuleSchema.shape.show_closed_assessment_score,\n  start_new_set: z.boolean(),\n});\nexport type StudentGradebookRow = z.infer<typeof StudentGradebookRowSchema>;\n\nexport function StudentGradebook({\n  resLocals,\n  rows,\n  csvFilename,\n}: {\n  resLocals: Record<string, any>;\n  rows: StudentGradebookRow[];\n  csvFilename: string;\n}) {\n  return html`\n    <!doctype html>\n    <html lang=\"en\">\n      <head>\n        ${HeadContents({ resLocals, pageTitle: 'Gradebook' })}\n      </head>\n      <body>\n        ${Navbar({ resLocals, navPage: 'gradebook', navSubPage: 'gradebook' })}\n        <main id=\"content\" class=\"container\">\n          <div class=\"card mb-4\">\n            <div class=\"card-header bg-primary text-white d-flex align-items-center\">\n              <h1>Gradebook</h1>\n              <a\n                href=\"/pl/course_instance/${resLocals.course_instance.id}/gradebook/${csvFilename}\"\n                class=\"btn btn-light btn-sm ms-auto\"\n                aria-label=\"Download gradebook CSV\"\n              >\n                <i class=\"fas fa-download\" aria-hidden=\"true\"></i>\n                <span class=\"d-none d-sm-inline\">Download</span>\n              </a>\n            </div>\n\n            <table class=\"table table-sm table-hover\" aria-label=\"Gradebook\">\n              <thead>\n                <tr>\n                  <th style=\"width: 1%\"><span class=\"visually-hidden\">Label</span></th>\n                  <th><span class=\"visually-hidden\">Title</span></th>\n                  <th class=\"text-center\">Score</th>\n                </tr>\n              </thead>\n              <tbody>\n                ${rows.map(\n                  (row) => html`\n                    ${row.start_new_set\n                      ? html`\n                          <tr>\n                            <th colspan=\"3\">${row.assessment_set_heading}</th>\n                          </tr>\n                        `\n                      : ''}\n                    <tr>\n                      <td class=\"align-middle\" style=\"width: 1%\">\n                        <span class=\"badge color-${row.assessment_set_color}\">${row.label}</span>\n                      </td>\n                      <td class=\"align-middle\">\n                        ${row.title}\n                        ${row.assessment_group_work\n                          ? html`<i class=\"fas fa-users\" aria-hidden=\"true\"></i>`\n                          : ''}\n                      </td>\n                      <td class=\"text-center align-middle\">\n                        ${row.show_closed_assessment_score\n                          ? Scorebar(row.assessment_instance_score_perc, { classes: 'mx-auto' })\n                          : 'Score not shown'}\n                      </td>\n                    </tr>\n                  `,\n                )}\n              </tbody>\n            </table>\n          </div>\n        </main>\n      </body>\n    </html>\n  `.toString();\n}\n"]}