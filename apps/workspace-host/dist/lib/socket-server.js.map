{"version":3,"file":"socket-server.js","sourceRoot":"","sources":["../../src/lib/socket-server.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,0BAA0B,CAAC;AACnD,OAAO,EAAE,KAAK,EAAE,MAAM,SAAS,CAAC;AAEhC,OAAO,EAAE,MAAM,EAAE,MAAM,aAAa,CAAC;AAErC,MAAM,CAAC,IAAI,EAAW,CAAC;AAEvB,IAAI,MAAa,CAAC;AAElB,MAAM,UAAU,IAAI;IAClB,MAAM,GAAG,IAAI,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;IACpC,EAAE,GAAG,IAAI,OAAO,CAAC,MAAM,CAAC,CAAC;AAC3B,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,KAAK;IACzB,MAAM,MAAM,EAAE,IAAI,EAAE,CAAC;AACvB,CAAC","sourcesContent":["import { Emitter } from '@socket.io/redis-emitter';\nimport { Redis } from 'ioredis';\n\nimport { config } from './config.js';\n\nexport let io: Emitter;\n\nlet client: Redis;\n\nexport function init() {\n  client = new Redis(config.redisUrl);\n  io = new Emitter(client);\n}\n\nexport async function close() {\n  await client?.quit();\n}\n"]}