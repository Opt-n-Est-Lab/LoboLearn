{"version":3,"file":"commonjs-preloads.js","sourceRoot":"","sources":["../src/commonjs-preloads.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,QAAQ,CAAC;AAEvC,8EAA8E;AAC9E,6EAA6E;AAC7E,MAAM,gBAAgB,GAAG;IACvB,yCAAyC;IACzC,uDAAuD;IACvD,uDAAuD;IACvD,2BAA2B;IAC3B,0BAA0B;IAC1B,wBAAwB;IACxB,qBAAqB;IACrB,SAAS;IACT,yCAAyC;IACzC,SAAS;IACT,qCAAqC;IACrC,KAAK;IACL,cAAc;IACd,yCAAyC;IACzC,SAAS;IACT,sCAAsC;IACtC,MAAM;IACN,OAAO;IACP,yCAAyC;IACzC,SAAS;IACT,0CAA0C;IAC1C,IAAI;IACJ,SAAS;IACT,uCAAuC;IACvC,OAAO;CACR,CAAC;AAEF,MAAM,OAAO,GAAG,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAC/C,KAAK,MAAM,GAAG,IAAI,gBAAgB,EAAE,CAAC;IACnC,IAAI,CAAC;QACH,OAAO,CAAC,GAAG,CAAC,CAAC;IACf,CAAC;IAAC,OAAO,CAAM,EAAE,CAAC;QAChB,uEAAuE;QACvE,2CAA2C;QAC3C,IAAI,CAAC,CAAC,IAAI,KAAK,kBAAkB;YAAE,MAAM,CAAC,CAAC;IAC7C,CAAC;AACH,CAAC","sourcesContent":["import { createRequire } from 'module';\n\n// The packages below were determined by inspecting the implementation of each\n// instrumentation package and finding which packages/files they're patching.\nconst PRELOAD_PACKAGES = [\n  // @opentelemetry/instrumentation-aws-sdk\n  '@aws-sdk/middleware-stack/dist/cjs/MiddlewareStack.js',\n  '@aws-sdk/middleware-stack/dist-cjs/MiddlewareStack.js',\n  '@aws-sdk/middleware-stack',\n  '@smithy/middleware-stack',\n  '@aws-sdk/smithy-client',\n  'aws-sdk/lib/core.js',\n  'aws-sdk',\n  // @opentelemetry/instrumentation-connect\n  'connect',\n  // @opentelemetry/instrumentation-dns\n  'dns',\n  'dns/promises',\n  // @opentelemetry/instrumentation-express\n  'express',\n  // @opentelemetry/instrumentation-http\n  'http',\n  'https',\n  // @opentelemetry/instrumentation-ioredis\n  'ioredis',\n  // @opentelemetry/instrumentation-postgres\n  'pg',\n  'pg-pool',\n  // @opentelemetry/instrumentation-redis\n  'redis',\n];\n\nconst require = createRequire(import.meta.url);\nfor (const pkg of PRELOAD_PACKAGES) {\n  try {\n    require(pkg);\n  } catch (e: any) {\n    // If the package is not found, it's fine, it just means that it wasn't\n    // installed. We'll throw any other errors.\n    if (e.code !== 'MODULE_NOT_FOUND') throw e;\n  }\n}\n"]}