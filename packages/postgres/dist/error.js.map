{"version":3,"file":"error.js","sourceRoot":"","sources":["../src/error.ts"],"names":[],"mappings":"AAAA,MAAM,UAAU,4BAA4B,CAAC,KAAa,EAAE,QAAmC;IAC7F,IAAI,QAAQ,IAAI,IAAI;QAAE,OAAO,KAAK,CAAC;IAEnC,MAAM,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,WAAW,CAAC,IAAI,EAAE,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;IACvE,IAAI,WAAW,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;IAChD,IAAI,WAAW,GAAG,CAAC;QAAE,WAAW,GAAG,KAAK,CAAC,MAAM,CAAC;IAChD,MAAM,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,QAAQ,GAAG,WAAW,GAAG,CAAC,CAAC,CAAC,CAAC;IAChE,OAAO,CACL,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,WAAW,CAAC;QAC/B,IAAI;QACJ,GAAG;QACH,KAAK;QACL,GAAG;QACH,KAAK;QACL,GAAG;QACH,gCAAgC;QAChC,KAAK,CAAC,SAAS,CAAC,WAAW,CAAC,CAC7B,CAAC;AACJ,CAAC","sourcesContent":["export function formatQueryWithErrorPosition(query: string, position: number | null | undefined) {\n  if (position == null) return query;\n\n  const prevNewline = Math.max(0, query.lastIndexOf('\\n', position) + 1);\n  let nextNewline = query.indexOf('\\n', position);\n  if (nextNewline < 0) nextNewline = query.length;\n  const gap = ' '.repeat(Math.max(0, position - prevNewline - 1));\n  return (\n    query.substring(0, nextNewline) +\n    '\\n' +\n    gap +\n    '^\\n' +\n    gap +\n    '|\\n' +\n    gap +\n    '+ ERROR POSITION SHOWN ABOVE\\n' +\n    query.substring(nextNewline)\n  );\n}\n"]}